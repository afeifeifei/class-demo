<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta name="keywords" content="关键词">
    <meta name="description" content="描述">
    <meta name="author" content="潭州教育-阿飞老师">
    <style>
        body{font-family: "Microsoft YaHei",serif;}
        body,dl,dd,p,h1,h2,h3,h4,h5,h6{margin:0;}
        ol,ul,li{margin:0;padding:0;list-style:none;}
        img{border:none;}

        p{
            margin: 20px 10px;
        }
        span{
            color: red;
            font-weight: bolder;
        }

    </style>
</head>
<body>
    <div id="wrap">
        <h3>我朱雀雀今天要吃水果！</h3>
        <p class="buy">
            买：
            <input type="button" value="买个苹果">
            <input type="button" value="买个梨子">
        </p>
        <p class="eat">
            吃：
            <input type="button" value="吃个苹果">
            <input type="button" value="吃个梨子">
        </p>
        <p class="count">
            <b>朱雀雀</b>还剩：<span>0</span>个苹果，<span>0</span>个梨子
        </p>
        <p class="total">
            <b>朱雀雀</b>总共还剩：<span>0</span>个水果。
        </p>
    </div>

    <script>


        let aButBuy = document.querySelectorAll(".buy input"),
            aButEat = document.querySelectorAll(".eat input"),
            aSpanTotal = document.querySelectorAll(".count span"),
            oTotalSpan = document.querySelector(".total span"),
            numArr = [0,0];

        //单独列出改变HTML内容的所有操作，这个模块只需要数据（numArr）的支撑
        function changeHTML(){
            numArr.forEach((item,index)=>{
                aSpanTotal[index].innerHTML = item;
            });
            oTotalSpan.innerHTML = numArr.reduce((a,b)=>a+b);
        }

        //单独列出计数器的变化，这个模块需要和事件操作联系起来
        function dataModel(bool,index){
            if( bool ){
                numArr[index]++;
            }else{
                numArr[index]--;
                if( numArr[index] < 0 ){
                    numArr[index] = 0;
                    alert("都没了还吃！");
                }
            }
        }

        [...aButBuy].forEach((item,index)=>{
            item.onclick = function(){
                dataModel(true,index);
                changeHTML();
            };
        });
        [...aButEat].forEach((item,index)=>{
            item.onclick = function(){
                dataModel(false,index);
                changeHTML();
            };
        });

        /*[...aButBuy].forEach((item,index)=>{
            item.onclick = function(){
                numArr[index] ++;
                aSpanTotal[index].innerHTML = numArr[index];
                oTotalSpan.innerHTML = numArr.reduce((a,b)=>a+b);
            };
        });
        [...aButEat].forEach((item,index)=>{
            item.onclick = function(){
                numArr[index] --;
                if( numArr[index] < 0 ){
                    numArr[index] = 0;
                    alert("都没了还吃！！");
                }
                aSpanTotal[index].innerHTML = numArr[index];
                oTotalSpan.innerHTML = numArr.reduce((a,b)=>a+b);
            };
        });*/

    </script>
</body>
</html>














